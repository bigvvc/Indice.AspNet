<swal title="Delete?" [text]="'Scope \'' + activeScope?.name + '\' will be deleted permanently. This action cannot be reversed.'" type="warning" [showCancelButton]="true" 
    (confirm)="delete()" #deleteAlert></swal>
<p *ngIf="!apiResource">Loading API resource scopes...</p>
<div class="api-resource-scopes" *ngIf="apiResource">
    <ngb-accordion [closeOthers]="true" activeIds="static-0" (panelChange)="panelChanged($event)">
        <ngb-panel *ngFor="let scope of apiResource?.scopes; let i = index;" [id]="'static-' + i"
            [title]="scope.displayName || scope.name">
            <ng-template ngbPanelContent>
                <form class="needs-validation" [ngClass]="{ 'was-validated': form.submitted }" (ngSubmit)="form.form.valid && update(scope)" novalidate #form="ngForm">
                    <div class="form-group row">
                        <label for="scope-id" class="col-sm-2 col-form-label">Scope Id</label>
                        <div class="col-sm-10 col-form-label">
                            <span class="col-form-label" id="scope-id" name="scope-id">{{ scope.name }}</span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="scope-display-name" class="col-sm-2 col-form-label">Display Name</label>
                        <div class="col-sm-10">
                            <input class="form-control" type="text" id="scope-display-name" name="scope-display-name" [(ngModel)]="scope.displayName" maxlength="200"
                                #scopeName="ngModel" />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="scope-description" class="col-sm-2 col-form-label">Description</label>
                        <div class="col-sm-10">
                            <textarea id="scope-description" name="scope-description" class="form-control" rows="3" maxlength="1000" [(ngModel)]="scope.description"
                                #description="ngModel"></textarea>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="scope-required" class="col-sm-2 col-form-label">Required</label>
                        <div class="col-sm-10">
                            <div class="form-check col-form-label">
                                <input class="form-check-input" type="checkbox" id="scope-required" name="scope-required" [checked]="scope.required" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="scope-show-in-dd" class="col-sm-2 col-form-label">Show in Discovery Document</label>
                        <div class="col-sm-10">
                            <div class="form-check col-form-label">
                                <input class="form-check-input" type="checkbox" id="scope-show-in-dd" name="scope-show-in-dd" [checked]="scope.showInDiscoveryDocument" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="scope-emphasize" class="col-sm-2 col-form-label">Emphasize</label>
                        <div class="col-sm-10">
                            <div class="form-check col-form-label">
                                <input class="form-check-input" type="checkbox" id="scope-emphasize" name="scope-emphasize" [checked]="scope.emphasize" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div>
                            <button type="submit" class="btn btn-primary waves-effect waves-light m-r-5">Update</button>
                            <button type="button" class="btn btn-danger waves-effect m-r-5 float-right" (click)="deletePrompt(scope)">Delete</button>
                        </div>
                    </div>
                </form>
            </ng-template>
        </ngb-panel>
    </ngb-accordion>
</div>
